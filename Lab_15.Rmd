---
title: "Lab_15"
author: "Matthew Copeland"
date: "April 30, 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
Exams <- read.csv("StudentsPerformance.csv", sep = ",")
library(tidyverse)
library(dplyr)
library(ggplot2)
library(cowplot)
library(stringr)
library(gapminder)
```

### Overall Question
How are factors like race, gender, parent's education impacting test performance of students?

This question is extremely important in discovering what trends exist and which students are more likely to succeed in their tests. It will be interesting to see if there is a difference in scores between genders or races. We would also expect an increase in scores somewhat proportionate to an increase in parent's education. 
=======
library(lubridate)
```


```{r}
Exams_math <- lm(math.score ~ test.preparation.course, data = Exams)
ggplot(data = Exams, mapping = aes(x = test.preparation.course, y = math.score)) +
  geom_jitter()+
  geom_smooth(method = "lm", na.rm = TRUE, color = "red")

Exams_reading <- lm(reading.score ~ test.preparation.course, data = Exams)
ggplot(data = Exams, mapping = aes(x = test.preparation.course, y = reading.score)) +
  geom_jitter()+
  geom_smooth(method = "lm", na.rm = TRUE, color = "red")

Exams_writing <- lm(writing.score ~ test.preparation.course, data = Exams)
ggplot(data = Exams, mapping = aes(x = test.preparation.course, y = writing.score)) +
  geom_jitter()+
  geom_smooth(method = "lm", na.rm = TRUE, color = "red")
```
### Individual SubQuestions
#### Kelsey's SubQuestion
How does being on free or reduced lunch impact your test scores?
This question is extremely important in determining whether students who are less advantaged financially do worse on their tests. This could translate to finding policies to even out student incomes and opportunities. Policies that should support these students even further should be applied if their scores are in fact lower. First I tested the scores for math, then others. 
```{r}
Exams1 <- Exams %>% filter(lunch == "free/reduced") 
perm_mean <- function(perms = 1000, n1)
{
  mean_mat <- matrix(0,1000,1)

  for (i in c(1:perms))
  {
    rsamp <- sample(Exams1$math.score, n1, replace = FALSE)
    A <- mean(rsamp)
    B <- mean(Exams$math.score)
    mean_mat[[i]] <- (A-B)
  }
  return(mean_mat)
}
mean(Exams$math.score)
means <- as.tibble(perm_mean( n1=33))
sd(Exams$V1)
realdiff <- mean(Exams1$math.score)- mean(Exams$math.score)
realdiff
std <- sqrt( (sd(Exams$math.score))^2/length(Exams1$math.score))
z_score <- realdiff/std
z_score
ggplot(means, aes(x=V1 ))+geom_histogram(binwidth=1)+
  xlab("Means")+
  geom_vline(xintercept = realdiff, color = "red", size = .3)+
  ylab("Number")+
  ggtitle("Difference in Means in Life Expectancy")
```
From the results above it is clear that there is an enormous discrepancy between students who have free and reduced lunch and the average student's test scores. Clearly, students on free or reduced lunch have lower math scores by 7.167 points. Through a permutation test we can see that the difference is present if we run 1000 trials and that the real difference between the two is very obvious. Since our z-score is so enormous 8.9, we know that there is very little change that the difference between these two groups is due to chance alone. Therefore, we can conclude that the results are statistically significant and students with free and reduced lunch have consistently lower math test scores than other students. 


### Lab 2 Reflection


#### Kelsey's Reflection
